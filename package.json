{
	"name": "umbrella",
	"description": "An umbrella repo that hosts all the LUME projects as git submodules in order to centralize management of all the projects.",
	"private": true,
	"// NOTE": "Any field starting with `//` is intended as a comment.",
	"engines": {
		"node": ">=14"
	},
	"scripts": {
		"clean": "lerna run clean",
		"install": "npm run update-modules && npm run reset && npm run docs:build",
		"update": "git pull && npm install",
		"update:clean": "git reset --hard && git submodule foreach git reset --hard && npm run update",
		"update-modules": "git submodule update --init --recursive",
		"bootstrap": "lerna bootstrap --ignore '{,readem,glas}' --no-ci --ignore-scripts --loglevel notice -- --loglevel notice && lerna bootstrap --scope '{,readem}' --no-ci --ignore-scripts && lerna bootstrap --scope '{,glas}' --no-ci && rimraf './packages/**/node_modules/electron/'",
		"// ^ bootstrap": "Bootstrap everything except readem, and then readem by itself, to avoid a circular link. (lume->readem->lume).",
		"// ^ bootstrap 2": "TODO bootstrap readem along with cli (somehow?), so that cli is linked into it. Maybe the scope would be {,readem,cli}?",
		"// ^ bootstrap 3": "We use --ignore-scripts so that the bootstrap doesn't run prepare scripts (except with the glas package which requires a postinstall step for webgl-raub). We want it to only put dependencies in place. A subsequent lerna build step builds everything in correct order. Otherwise some packages will try to build themselves before dependencies are in place.",
		"reset": "npm run purge && npm run bootstrap && npm run build",
		"purge": "(lerna run clean || true) && npm run unbootstrap",
		"// ^ purge": "'lerna clean --yes' removes all node_modules while 'lerna run clean' runs each project's particular 'clean' script.",
		"unbootstrap": "lerna clean --yes",
		"docs:build": "lerna run docs:build",
		"docs:serve": "lerna run docs:serve",
		"website:publish": "git push && ssh infamous@trusktr.io \"bash --login -c 'cd ~/lume+lume && npm run update:clean' && echo 'Enter root password to restart web server:' && su -c 'systemctl restart lume-website.service'\"",
		"website:landing": "cd apps/website && meteor",
		"website": "(npm run docs:serve & p1=$!; npm run website:landing & p2=$!; wait $p1 $p2)",
		"build": "npm run clean && lerna run build",
		"test": "lerna run test --scope '{element,element-behaviors,lume,james-bond,lowclass,variable,glas,eventful,custom-attributes}'",
		"test:ci": "npm run test -- --concurrency 1",
		"// ^ test:ci": "Concurrency needs to be 1 in CI for some reason, but I forgot to comment why.",
		"dev": "echo ' --- TODO: dev script for running everything in dev mode. For now, cd into each packages and run dev manually.'",
		"prettier": "prettier . --write",
		"prettier:check": "prettier . --check"
	},
	"devDependencies": {
		"electron": "14.0.1",
		"lerna": "^3.20.2",
		"prettier": "^2.0.0",
		"rimraf": "^2.7.1"
	}
}
